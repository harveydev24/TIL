> 모두의 네트워크를 읽고 공부한 내용을 정리한 레파지토리입니다.

---





# 1장 기초지식

## 1. 네트워크의 구조

- **네트워크**란 두 대 이상의 컴퓨터를 연결하여 서로 데이터를 전송할 수 있게 하는 통신망
- **인터넷**은 전 세계의 큰 네트워크부터 작은 네트워크까지 연결하는 거대한 네트워크
  - TCP/IP 프로토콜을 사용하는 세계 최대 규모의 네트워크
- **패킷**이란 컴퓨터 간에 데이터를 주고받을 때 네트워크를 통해 전송되는 데이터의 작은 조각
  - 큰 데이터를 작게 나누어 전송
  - 이는 큰 데이터를 그대로 전송하면 그 데이터가 네트워크의 대역폭(네트워크에서 이용 가능한 최대 전송 속도, 정보를 전송할 수 있는 단위 시간당 전송량)을 너무 많이 점유해서 다른 패킷의 흐름을 막을 위험이 있기 때문
  - 목적지로 보낸 패킷은 전송한 순서대로 도착하지 않을 수 있음
  - 또는 패킷이 전송될 때 네트워크가 지연되어서 늦게 도착하거나 누락되기도 함
  - 즉, 패킷은 도착 순서를 보장할 수 없음
    - 사진 데이터를 패킷으로 나누어 보낼 때, 목적지에서는 패킷을 합쳐 사진 데이터를 복구할 수 있어야함
    - 따라서 패킷을 합쳐 데이터를 복구하기 위해서 송신 측에서 수신 측으로 패킷을 보낼 때, 각 패킷에 번호를 붙여 보냄  



## 2. 정보의 양을 나타내는 단위

- 0과 1의 정보를 나타내는 최소 단위를 **비트(bit)**라고 함
- **8비트(bit)**는 **1바이트(byte)**
- 컴퓨터는 기본적으로 바이트 단위로 데이터를 읽고 쓰는 작업을 수행
- 숫자를 문자로 치환하기 위해 문자 코드 사용
  - 대표적으로 ASCII(아스키) 코드
    - 알파벳, 기호, 숫자 등을 다룰 수 있는 기본적인 문자 코드
- 문자 데이터도 패킷으로 나누어서 보냄  





## 3. 랜과 왠

-  네트워크는 접속할 수 있는 범위에 따라 크게 두 가지 종류로 나눔

  1. **LAN**(Local Area Network)
     - 건물 안이나 특정 지역을 범위로 하는 네트워크
     - 가정이나 빌딩 안에 있는 사무실 같이 지리적으로 제한된 곳에서 컴퓨터와 프린터 등을 연결할 수 있는 네트워크
  2. **WAN**(Wide Area Network)
     - 지리적으로 넓은 범위에 구축된 네트워크
     - 인터넷 서비스 제공자(ISP)가 제공하는 서비스를 사용하여 구축된 네트워크
       - ISP: Internet Service Provider
         - 인터넷 상용 서비스 사업을 하고 있는 KT, U+, SK브로드밴드와 같은 사업자

  |      |           LAN            |         WAN          |
  | :--: | :----------------------: | :------------------: |
  | 범위 | 좁음(건물이나 특정 지역) | 넓음(랜과 랜을 연결) |
  | 속도 |           빠름           |         느림         |
  | 오류 |           적음           |         많음         |

  




## 4. 가정에서 하는 랜 구성

- 가정에서 인터넷을 개통할 때는 **인터넷 서비스 제공자**와 **인터넷 회선**을 결정해야 함
- 인터넷 서비스 제공자와 네트워크를 연결하기 위해서는 **공유기**가 필요  





## 5. 회사에서 하는 랜 구성

- 외부에 공개하기 위한 네트워크인 **DMZ**라는 네트워크 영역 존재
  - 일반적으로 인터넷인 외부 네트워크와, 내부 네트워크 사이에 위치한 중간 지대(서브넷)를 말함
  - 네트워크의 보안 영역으로 외부 공격자가 내부 네트워크에 침입하는 것을 막음
- 웹 사이트를 불특정 다수의 외부 사용자에게 공개하려면 **웹 서버**를 공개
- 외부 사용자와 메일을 주고받으려면 **메일 서버**를 공개
- 외부에서 도메인 이름을 사용하여 회사의 서버에 접속하려면 **DNS 서버**를 공개
- 사내 또는 데이터 센터에 서버를 두고 운영하는 것을 **온프레미스**(on-premise)라 함  







# 2장 네트워크의 기본 규칙

## 6. 네트워크의 규칙

- 컴퓨터 간에 정보를 주고받을 때, 통신 방법에 대한 규칙이나 표준을 **프로토콜**이라 함



## 7. OSI모델과 TCP/IP 모델

- 여러 회사에서 만든 컴퓨터들이 통신하기 위해서는 표준 규격이 필요함

- ISO(International Organization for Standardization)에서 **OSI 모델**이라는 표준 규격을 제정

  - 데이터를 송수신 할 때, 컴퓨터 내부에서 일어나는 일을 일곱 계층(레이어)로 나눈 모델

    | 계층  |       이름       |                             설명                             |
    | :---: | :--------------: | :----------------------------------------------------------: |
    | 7계층 |    응용 계층     | 이메일 & 파일 전송, 웹 사이트 조회 등 어플리케이션에 대한 서비스 제공 |
    | 6계층 |    표현 계층     |          문자 코드, 압축, 암호화 등의 데이터를 변환          |
    | 5계층 |    세션 계층     |                 세션 체결, 통신 방식을 결정                  |
    | 4계층 |    전송 계층     |                  신뢰할 수 있는 통신을 구현                  |
    | 3계층 |  네트워크 계층   | 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정  |
    | 2계층 | 데이터 링크 계층 |      네트워크 기기 간의 데이터 전송 및 물리 주소를 결정      |
    | 1계층 |    물리 계층     |     시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어     |

  - 각 계층은 독립적이므로 데이터가 전달되는 동안 다른 계층의 영향을 받지 않음
  - 송신 측에서 7계층 -> 1계층으로 데이터를 보내면 수신 측에서 1계층 -> 7계층을 통해 데이터를 받음

- **TCP/IP** 모델은 OSI 모델의 7계층을 4계층으로 단순화 시킨 모델

  - OSI모델과 대응 시키면 다음과 같음
    - 응용 계층 - 응용 계층 + 표현 계층 + 세션 계층
    - 전송 계층 - 전송 계층
    - 인터넷 계층 - 네트워크 계층
    - 네트워크 접속 계층 - 데이터 링크 계층 + 물리 계층



## 8. 캡슐화와 역캡슐화

- 데이터의 송신을 위해서는 데이터의 앞부분에 전송하는 데 필요한 정보를 붙여 다음 계층으로 보내야하는데, 이를 **헤더**라고 함
  - 헤더는 데이터의 내용이나 성격을 식별 또는 제어하는 데 사용됨
- 송신 측에서 헤더를 붙여 나가는 것을 **캡슐화**, 수신 측에서 헤더를 제거하는 것을 **역캡슐화**라 함

​		![image-20220309000156241](README.assets/image-20220309000156241.png)

1. 송신 측 컴퓨터에서 웹 사이트에 접속하려 하면, 응용 계층에서 웹 사이트에 접속하기 위한 요청 데이터가 만들어짐
2. 해당 데이터는 전송 계층에 전달되어 전송 계층에서 신뢰할 수 있는 통신이 이루어지도록 헤더를 붙임
3. 다음으로 네트워크 계층에 전달되어 헤더를 붙임
4. 마지막으로 물리적인 통신 채널을 연결하기 위해 데이터 링크 계층에서 헤더와 트레일러를 붙임
5. 최종적으로 데이터는 전기신호로 변환돼어 수신 측에 도착
6. 수신 측에서는 위의 과정을 거꾸로 진행하며 헤더를 제거해나감



# 3장 물리 계층: 데이터를 전기 신호로 변환하기

## 9. 물리 계층의 역할과 랜 카드의 구조

- OSI 모델의 물리 계층에서 0과 1로 이루어진 비트열이 전기 신호로 변환됨
- 위 과정은 랜 카드가 담당함
  - 0과 1의 정보가 컴퓨터 내부의 랜 카드로 전송되면, 랜 카드는 이를 전기 신호로 바꿈

## 10. 케이블의 종류와 구조

- 전송 매체는 데이터가 흐르는 물리적인 선로
  - 유선
    - 트위스트 페어 케이블, 광케이블
  - 무선
    - 라디오파, 마이크로파, 적외선
- 트위스트 페어 케이블(랜 케이블 =**랜선**)
  - UTP 케이블
    - 구리 선 8개를 2개씩 꼬아 만든 네 쌍의 전선
    - 실드가 없어 외부에서 발생하는 노이즈의 영향이 큼
    - 저렴
    - 데이터 전송 품질에 따라 종류가 나뉨
  - STP 케이블
    - 실드가 있는 케이블
    - 비쌈
- 랜 케이블의 종류
  - 다이렉트 케이블
    - 구리 선 여덟 개를 같은 순서로 커넥터에 연결한 케이블
    - 1, 2, 3, 6번 사용
    - 컴퓨터와 스위치를 연결할 때 사용
  - 크로스 케이블
    - 구리 선 여덟 개 중 한쪽 커넥터의 1번과 2번에 연결되는 구리 선을 다른 쪽 커넥터의 3번과 6번에 연결
    - 컴퓨터 간에 직접 랜 케이블로 연결할 때 사용
    - 전선의 연결 순서를 다르게 하여 송신과 수신을 분리함으로써 데이터 충돌을 방지



## 11. 리피터와 허브의 구조

- **리피터**와 **허브**는 물리 계층에서 동작하는 네트워크 장비
  - **리피터**는 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 기능을 함
    - 멀리 있는 상대방과 통신할 수 있게 신호를 정상으로 만드는 기능
    - 요즘은 다른 네트워크 장비가 리피터의 기능을 지원하여 잘 사용하지 않음
  - **허브**는 리피터와 마찬가지로 전기 신호를 정형하고 증폭하는 기능을 함
    - 리피터는 일대일 통신만 가능하지만, 허브는 포트를 여러개 가지고 있어 여러 대의 컴퓨터와 통신 가능
    - 허브는 특정 포트로부터 데이터를 받는다면, 해당 포트를 제외한 나머지 모든 포트로 받은 데이터를 전송함
    - 컴퓨터1에서 컴퓨터2로 데이터를 전송하면 컴퓨터2만 데이터를 받는게 맞지만, 실제로 허브를 사용하면 컴퓨터3, 컴퓨터4에도 데이터가 전송됨
      - 이러한 비효율적인 특징 때문에 더미 허브(dummy hub)라고도 불림



# 4장 데이터 링크 계층: 랜에서 데이터 전송하기

## 12. 데이터 링크 계층의 역할와 이더넷

- **데이터 링크 계층**은 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층
  - 랜에서 데이터를 정상적으로 주고받기 위해 필요한 계층
  - 일반적으로 **이더넷**이 가장 많이 사용되는 규칙
    - 허브를 통해 데이터를 송신할 때 목적지에 대한 정보를 추가하여 목적지 이외의 컴퓨터는 데이터를 받더라도 무시
    - 여러 컴퓨터가 동시에 데이터를 전송해도 충돌이 일어나지 않는 구조
      - 이를 위해 데이터를 보내는 시점을 늦추는 방법 **CSMA/CD**
        - CS
          - '데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 아닌지를 확인한다'는 규칙
        - MA
          - '케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다'는 규칙
        - CD
          - '충돌이 발생하고 있는지를 확인한다'는 규칙
        - CSMA/CD는 효율이 좋지 않아 요즘에는 거의 사용하지 않고 대신 **스위치**라는 네트워크 장비를 이용하여 데이터의 충돌을 피함



## 13. MAC 주소의 구조

- 0과 1로 이루어진 비트열을 전기 신호로 변환하는 랜카드에는 **MAC 주소**라는 번호가 정해져 있음

  - Media Access Control Address
  - 제조할 때 새겨지므로 물리 주소라고도 하며 전 세계에서 유일한 번호로 할당됨
  - 중복되지 않는 48비트 숫자로 구성됨
    - 00-23-AE-D9-7A-9A
      - 앞쪽 24비트는 랜 카드를 만든 제조사 번호
      - 뒤쪽 24비트는 제조사가 랜 카드에 붙인 일련번호

  - OSI 모델에서는 데이터 링크 계층에서, TCP/IP 모델에서는 네트워크 계층에서 **이더넷 헤더**와 **트레일러**를 붙임
    - 이더넷 헤더는 목적지의 MAC 주소(6바이트=48비트), 출발지 MAC 주소(6바이트), 유형(2바이트) 이렇게 총 14바이트로 구성됨
      - 이더넷 유형(Ethernet type)은 이더넷으로 전송되는 상위 계층 프로토콜의 종류를 나타냄
    - 트레일러는 FCS(Frame Check Sequence)라고도 하며, 데이터 전송 도중에 오류가 발생하는지 확인하는 용도로 사용
    - 이더넷 헤더와 트레일러가 추가된 데이터를 **프레임**이라고 함
      - 데이터 링크 계층에서 이더넷 헤더와 트레일러를 추가하여 프레임을 만들고(캡슐화), 물리 계층에서 이 프레임 비트열을 전기 신호로 변환하여 네트워크를 통해 전송
      - 데이터를 받은 컴퓨터에서는 데이터의 목적지 MAC 주소와 자신의 MAC 주소가 다르면 데이터를 파기
      - MAC 주소가 같을 경우 물리 계층에서 전기 신호로 전송된 데이터를 비트열로 변환하고 데이터 링크 계층에서 이더넷 헤더와 트레일러를 분리(역캡슐화)



## 14. 스위치의 구조

- **스위치**는 데이터 링크 계층에서 동작하고 레이어 2 스위치 또는 스위칭 허브라고도 불림
- 스위치 내부에는 MAC 주소 테이블(MAC address table)이 존재
  - 스위치의 포트 번호와 해당 포트에 연결 되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터 베이스
- 스위치는 MAC 주소 학습 기능을 가짐
  - 컴퓨터에서 목적지 MAC 주소가 추가된 프레임이 전송되면, MAC 주소 테이블을 확인하고, 출발지 MAC 주소가 등록되어 있지 않으면 MAC 주소를 포트와 함께 등록
  - 이 때, 목적지 MAC 주소가 MAC 주소 테이블에 등록되어 있지 않으면, 허브처럼 모든 포트에 프레임이 전송되며 이를 플러딩(flooding)이라고 함
  - 목적지 MAC 주소가 등록되어 있으면, 해당 목적지에만 프레임이 전송되며 이를 MAC 주소 필터링이라고 함
    - 이를 통해 불필요한 데이터를 네트워크에 전송하지 않게 됨



## 15. 데이터가 케이블에서 충돌하지 않는 구조

- 통신 방식은 2가지
  - **전이중 통신 방식**
    - 데이터의 송수신을 동시에 통신하는 방식
    - 데이터를 동시에 전송해도 충돌이 발생하지 않음
  - **반이중 통신 방식**
    - 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
    - 데이터를 동시에 전송하면 충돌이 발생함
- 컴퓨터와 컴퓨터를 직접 랜케이블로 연결한다면 전이중 통신 방식이됨
  - 크로스 케이블을 이용하여 송수신이 분리되기 때문
- 그러나 허브의 경우 내부는 송수신이 나누어져 있지 않기 때문에 동시에 데이터를 보내면 충돌이 일어남
  - 네트워크 지연 발생
  - 이 때문에 허브는 회선 하나를 통해 송신과 수신을 번갈아가면서 일어나는 반이중 통신 방식을 사용
- 스위치의 경우 충돌이 일어나지 않는 구조로 되어 있어 전이중 통신 방식으로 데이터를 주고받을 수 있음
  - 전송과 동시에 수신이 가능하여 효율이 높음

- 네트워크에서 충돌이 발생할 때 그 영향이 미치는 범위를 충돌 도메인(collision domain)이라고 함
  - 충돌 도메인의 범위가 넓을수록 네트워크가 지연됨
  - 허브는 연결되어 있는 컴퓨터 전체가 하나의 충돌 도메인이 됨
    - 즉, 충돌의 영향이 모든 컴퓨터에 미침
  - 스위치는 데이터를 동시에 송수신할 수 있는 전이중 통신 방식이기 때문에 충돌이 일어나지 않고 충돌 도메인의 범위도 관련 있는 컴퓨터만 포함되어 좁음
- **ARP(Address Resolution Protocol)**
  - 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜
  - 출발지 컴퓨터가 목적지 주소를 모르면 목적지의 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는데, 이를 ARP 요청이라 함
  - 이 요청에 대해 지정된 IP 주소를 가지고 있지 않은 컴퓨터는 응답하지 않지만, 지정된 IP 주소를 가진 컴퓨터는 MAC 주소를 응답으로 보내며, 이를 ARP 응답이라 함
  - 이를 통해 출발지 컴퓨터는 MAC 주소를 얻고 이더넷 프레임을 만들 수 있음
  - 출발지 컴퓨터에서는 MAC 주소를 얻은 후에 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관하며, 이를 ARP 테이블이라 함
  - 이후 데이터 통신은 자신의 컴퓨터에 보관된 ARP 테이블을 참고하여 전송
    - 그러나 IP 주소가 변경되면 해당 MAC 주소도 함께 변경되므로 제대로 통신할 수 없음
    - 그래서 ARP 테이블에서는 보존 기간을 ARP 캐시로 지정하고 일정 시간이 지나면 삭제하고 다시 ARP 요청을 함



## 16. 이더넷의 종류와 특징

- 이더넷은 케이블의 종류나 통신 속도에 따라 다양한 규격으로 분류됨
- 10-BASE-T
  - 10은 Mbps단위인 통신 속도로 10Mbps를 의미
  - BASE는 BASEBAND라는 전송 방식을 의미
  - T는 UTP 케이블을 의미
- 최근 컴퓨터의 랜 포트는 1000BASE-T가 일반적이며 10GBASE-T도 늘어나는 추세




​				
